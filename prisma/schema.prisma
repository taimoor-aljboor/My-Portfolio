// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enums
enum ProjectStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum MessageStatus {
  NEW
  READ
  ARCHIVED
}

enum ExperienceType {
  FULL_TIME
  PART_TIME
  FREELANCE
  CONTRACT
  INTERNSHIP
}

// User & Authentication
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      String   @default("ADMIN")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Profile Information
model Profile {
  id              String   @id @default(cuid())
  fullNameEn      String
  fullNameAr      String
  headlineEn      String
  headlineAr      String
  bioEn           String   // Rich text (JSON or HTML)
  bioAr           String   // Rich text (JSON or HTML)
  email           String   @unique
  phone           String?
  locationEn      String
  locationAr      String
  avatarUrl       String?
  cvPdfUrl        String?
  socialLinks     Json     // LinkedIn, X, Facebook, Instagram, YouTube, GitHub, WhatsApp, Other[]
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  createdBy       String?
  updatedBy       String?
}

// Projects & Portfolio
model Project {
  id            String        @id @default(cuid())
  titleEn       String
  titleAr       String
  shortDescEn   String
  shortDescAr   String
  longDescEn    String        // Rich text
  longDescAr    String        // Rich text
  slugEn        String        @unique
  slugAr        String        @unique
  techStack     String[]      // Array of technology tags
  demoUrl       String?
  repoUrl       String?
  caseStudyUrl  String?
  status        ProjectStatus @default(DRAFT)
  featured      Boolean       @default(false)
  displayOrder  Int          @default(0)
  dateFrom      DateTime?
  dateTo        DateTime?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  createdBy     String?
  updatedBy     String?
  deletedAt     DateTime?

  // Relations
  images        MediaAsset[]
  clients       ProjectClient[]
  testimonials  Testimonial[]
  category      ProjectCategory? @relation(fields: [categoryId], references: [id])
  categoryId    String?

  @@index([status, displayOrder])
  @@index([featured])
  @@index([slugEn])
  @@index([slugAr])
}

model ProjectCategory {
  id          String    @id @default(cuid())
  nameEn      String
  nameAr      String
  slugEn      String    @unique
  slugAr      String    @unique
  displayOrder Int      @default(0)
  projects    Project[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([displayOrder])
}

model ProjectClient {
  id        String   @id @default(cuid())
  nameEn    String
  nameAr    String
  website   String?
  logoUrl   String?
  projects  Project[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Experience & Education
model Experience {
  id            String        @id @default(cuid())
  companyEn     String
  companyAr     String
  titleEn       String
  titleAr       String
  descriptionEn String        // Rich text
  descriptionAr String        // Rich text
  type         ExperienceType
  locationEn    String?
  locationAr    String?
  current      Boolean       @default(false)
  startDate    DateTime
  endDate      DateTime?
  displayOrder Int          @default(0)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt

  @@index([displayOrder])
  @@index([current])
}

model Education {
  id            String   @id @default(cuid())
  institutionEn String
  institutionAr String
  degreeEn      String
  degreeAr      String
  fieldEn       String
  fieldAr       String
  locationEn    String?
  locationAr    String?
  startDate     DateTime
  endDate       DateTime?
  gpa          Float?
  descriptionEn String?   // Additional details/achievements
  descriptionAr String?
  displayOrder  Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([displayOrder])
}

// Skills & Certifications
model Skill {
  id           String   @id @default(cuid())
  nameEn       String
  nameAr       String
  category     String   // e.g., "Frontend", "Backend", "DevOps"
  proficiency  Int      @default(0) // 0-100
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([category])
  @@index([displayOrder])
}

model Certification {
  id            String    @id @default(cuid())
  titleEn       String
  titleAr       String
  issuerEn      String
  issuerAr      String
  issueDate     DateTime
  expiryDate    DateTime?
  credentialId  String?
  credentialUrl String?
  displayOrder  Int       @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([displayOrder])
}

// Contact & Testimonials
model Message {
  id        String        @id @default(cuid())
  name      String
  email     String
  subject   String
  message   String
  status    MessageStatus @default(NEW)
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
}

model Testimonial {
  id          String    @id @default(cuid())
  nameEn      String
  nameAr      String
  titleEn     String
  titleAr     String
  contentEn   String
  contentAr   String
  avatarUrl   String?
  rating      Int?      // Optional 1-5 rating
  displayOrder Int      @default(0)
  project     Project?  @relation(fields: [projectId], references: [id])
  projectId   String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([displayOrder])
}

// Media & Assets
model MediaAsset {
  id           String   @id @default(cuid())
  url          String
  type         String   // "image", "video", "document"
  altTextEn    String?
  altTextAr    String?
  displayOrder Int      @default(0)
  width        Int?
  height       Int?
  bytes        Int?
  contentType  String?
  filename     String?
  project      Project  @relation(fields: [projectId], references: [id])
  projectId    String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([type])
  @@index([displayOrder])
} 
